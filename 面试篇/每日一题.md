# 1.commonjs的模块机制和es6模块机制的区别?

## 区别

1. CommonJS 是运行时加载，ES6 是编译时加载。原因：CommonJS 加载的是一个对象（即module.exports属性），该对象只有在脚本运行完才会生成。而 ES6 模块不是对象，它的对外接口只是一种静态定义，在代码静态解析阶段就会生成。
2. 语法不同。commonjs使用`require、module.exports`关键字导入导出， es模块使用`import、export`关键字导入导出。
3. CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。注意：CommonJS 模块输出的是值的拷贝，也就是说，一旦输出一个值，模块内部的变化就影响不到这个值ES6 模块是动态引用，并且不会缓存值，模块里面的变量绑定其所在的模块。
4. CommonJS 模块的require()是同步加载模块，ES6 模块的import命令是异步加载，有一个独立的模块依赖的解析阶段。

# 2.Object.defineProperty和Proxy的区别，Vue3 为什么用Proxy替代Object.defineProperty？

## 区别

### Object.defineProperty ：

- 必须遍历对象的每个属性，不能监听对象本身；
- 无法监听到对象新增的属性；
- 无法监听数组变化（数组的这些方法不能触发set:push、pop、shift、unshift、splice、sort、reverse）。Vue对其变异方法进行重写；
- Vue2使用Object.defineProperty对所有对象的属性进行遍历，性能较差；

### Proxy：

- 监听对象本身；
- 可以监听到对象新增的属性；
- 可以监听到数组变化；
- 性能较好；
- 监听的事件类型更多；

## Vue3使用Proxy的原因：

- 可以直接监听对象本身，不需要遍历循环对象的每个属性，减少代码体积。
- 解决Vue无法监听到对象新增的属性的问题；